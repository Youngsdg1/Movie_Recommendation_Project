{% extends 'base.html' %}
{% load bootstrap4 %}

{% block title %}
Movie List
{% endblock title %}

{% block body %}
<h1>영화 목록</h1>
<a href="{% url 'accounts:user_list' %}">
    <button>유저 목록으로
    </button>
</a>
<br>
<br>
<div id="app">
    <div v-for="movie in movies" :key="movie.pk" style="display: inline">
        <img 
        @onclick
        :src="[[ movie.fields.poster_url ]]" 
        alt="movie_poster" 
        style='width: 300px'>
    </div>
</div>

<div>
    <div v-if="flag">
        <!-- <button  @click="getYearsMovies" id="js-years-button-off">1990</button>
            <li v-for="movie in years_of_movies">
                [[ movie ]]
            </li> -->
    </div>

    <div v-else>
        <button id="js-years-button-on">2018</button>

    </div>
</div>
{% endblock body %}

{% block vue_script %}
<script>
    const app = new Vue({
            el: '#app',
            delimiters: ['[[', ']]'],
            data() {
                return {
                    flag: true,
                    movies: JSON.parse(`{{ movies|safe }}`),
                }
            },
            computed: {
                getYearsMovies(movie_of_years) {
                    const movies_arr = []
                    this.movies_arr = movie_of_years
                    flag = false
                    return this.movies_arr
                },
            }
        })
</script>
{% endblock %}