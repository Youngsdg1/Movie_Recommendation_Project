{% extends 'movies/base.html' %}
{% load bootstrap4 %}

{% block title %}
    Movie List
{% endblock title %}

{% block body %}
<h1>영화 목록</h1>
    <a href="{% url 'accounts:user_list' %}">
        <button>유저 목록으로
        </button>
    </a>
    <br>
<br>
<div id="app">
    <ul>
        <li v-for="movie in movies" :key="movie.pk">
            [[ movie.fields.title ]]
        </li>
    </ul>

</div>

<div>
    <div v-if="flag">
        <!-- <button  @click="getYearsMovies(movies)" id="js-years-button-off">1990</button>
            <li v-for="movie in years_of_movies">
                [[ movie ]]
            </li> -->
    </div>

    <div v-else>
        <button id="js-years-button-on">2018</button>

    </div>
</div>
    {% comment %} {% if movies %}
        {% for movie in movies %}
            <div style="display:inline-block">
                <a href="{% url 'movies:movie_detail' movie.id %}">
                    <img src="{{ movie.poster_url }}" alt="movie_poster" style='width: 300px'>
                    <button @click="getYearsMovies">Click</button>
                </a>
            </div>
        {% endfor %}
    {% endif %} {% endcomment %}
{% endblock body %}

{% block vue_script %}
<script>
    const app = new Vue(
        {
            el: '#app',
            delimiters: ['[[', ']]'],
            data () {
                return {
                    flag: true,
                    movies: JSON.parse(`{{ movies|safe }}`),                }
            },
            computed: {
                getYearsMovies(movie_of_years) {
                    const movies_arr = []
                    this.movies_arr = movie_of_years
                    flag = false
                    return this.movies_arr
                },
            }
        }
    )
</script>
{% endblock %}
